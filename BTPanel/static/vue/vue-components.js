"use strict";function asyncGeneratorStep(t,e,n,a,i,r,o){try{var s=t[r](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(s){return function(){var t=this,o=arguments;return new Promise(function(e,n){var a=s.apply(t,o);function i(t){asyncGeneratorStep(a,e,n,i,r,"next",t)}function r(t){asyncGeneratorStep(a,e,n,i,r,"throw",t)}i(void 0)})}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}dynamic.delay("vue-components",function(){Vue.prototype.$request=bt.get_cookie("site_model"),Vue.prototype.$isType=function(t){var e=_typeof(t);return"object"!==e?e:Array.isArray(t)?"array":t?e:"null"},Vue.prototype.$http=function(i,r){var o=this;return new Promise(function(e,t){var n=Object.keys(i),a={url:o.$request&&"/project/java/"+n[0]||n[0],data:(r&&o.$request?{data:JSON.stringify(r)}:r)||{}};bt_tools.send(a,function(t){e(t)},t,{load:i[n[0]],verify:!("verify"in i)||i.verify})})},Vue.prototype.$shell=function(i){return new Promise(function(n,a){layer.open({type:1,title:i.title,area:i.area,btn:!1,closeBtn:!1,content:'<div id="command_install_list" style="height: 100%;"><pre class="command_output_pre"  style="height: 100%;"></pre></div>',success:function(t,e){try{bt_tools.command_line_output({el:"#command_install_list .command_output_pre",area:["100%","100%"],shell:i.shell,message:function(t){-1<t.indexOf("|-Successify --- 命令已执行! ---")&&(i.success&&i.success(t),setTimeout(function(){layer.close(e),n()},100))}})}catch(t){a(t)}}})})},Vue.prototype.$tryCatch=function(t,e){try{t()}catch(t){console.log(t),this.$error(t)}},Vue.prototype.$layer=function(t){return layer.open({type:1,title:t.title,area:t.area,btn:!1,closeBtn:2,content:$(t.content),success:t.success,end:t.end})},Vue.prototype.$confirm=function(e){return new Promise(function(n,t){e.cancel=function(){t(!1)},bt.confirm(e,function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:layer.close(e),n(e);case 2:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),function(){t(!1)})})},Vue.prototype.$load=function(t){return bt.load(t)},Vue.prototype.$msg=function(t){var e="",n=null;t&&("object"===_typeof(t)&&(e="msg"in t?t.msg:"error_msg"in t?t.error_msg:t.data,"status"in t&&(n=t.status?1:2)),"icon"in t&&(n=t.icon),layer.msg(e,{icon:"number"===this.$isType(n)?n:0}))},Vue.prototype.$success=function(t){this.$msg({status:!0,msg:t})},Vue.prototype.$error=function(t){this.$msg({status:!1,msg:t})},Vue.prototype.$warning=function(t){this.$msg({icon:0,msg:t})},Vue.component("bt-line",{template:'<div class="line">\n            <span class="tname" :style="{\'width\':labelWidth}">{{label}}</span>\n            <div class="info-r" :style="{\'margin-left\':labelWidth}">\n                <slot></slot>\n            </div>\n        </div>',props:{label:String,labelWidth:String}}),Vue.component("bt-text",{template:'<div :class="{inlineBlock:!block,block:block,relative:iconInternal}" v-if="type === \'text\' || type === \'number\'">\n            <input type="text"\n            :type="type"\n            :id="id"\n            :value="value"\n            :class="custClass?custClass:(\'bt-input-text \' + (className || \'\'))"\n            :min="min"\n            :max="max"\n            :disabled="disabled"\n            :readonly="readonly"\n            :style="{width:width}"\n            :placeholder="placeholder" @input="$emit(\'input\', $event.target.value)" @blur="$emit(\'blur\',$event.target.value)" @keyup="$emit(\'keyup\',$event)" />\n            <span :class="\'glyphicon glyphicon-\'+ icon +\' cursor\'" v-if="icon" @click="$emit(\'icon-event\')" :style="iconInternal?\'\':\'\'"></span>\n            <span v-if="describe" class="unit">{{ describe }}</span>\n        </div>\n        <div class="inlineBlock" v-else-if="type === \'textarea\'">\n            <textarea class="bt-input-text"\n                :style="{width:width,height:height,resize:resize?\'auto\':\'\',lineHeight:lineHeight}"\n                :disabled="disabled"\n                :readonly="readonly"\n                @input="$emit(\'input\', $event.target.value)"\n                :value="value"\n                ref="text"\n                :placeholder="(tips && placeholder)"\n                @blur="hide_placeholder"\n                @foucus="show_placeholder"></textarea>\n            <div v-if="!tips" :class="\'placeholder c9 \'+  (value !== \'\'?\'hide\':\'\') " style="top:10px;left:15px;" v-html="(typeof placeholder == \'string\'?placeholder:placeholder.join(\'</br>\'))" v-show="textPlaceholder" @click="show_placeholder"></div>\n        </div>',props:{id:String,type:{type:String,default:"text"},width:{type:String,default:"200px"},resize:{type:Boolean,default:!1},height:{type:String,default:"100px"},custClass:{type:String,default:""},block:{type:!1,default:""},iconInternal:{type:Boolean,default:!1},describe:{type:String,default:""},lineHeight:String,min:Number,max:Number,disabled:Boolean,readonly:Boolean,placeholder:[String,Array],className:String,icon:{type:[String,Boolean],default:!1},tips:{type:Boolean,default:!1},value:{type:[String,Number],default:""}},data:function(){return{textPlaceholder:!0,layerTips:0}},watch:{value:{immediate:!0,handler:function(t){this.$emit("input",t)}}},methods:{show_placeholder:function(){var t=this.placeholder;"string"==typeof t&&(t=[t]),this.textPlaceholder=!1,this.layerTips=layer.tips(t.join("</br>"),this.$refs.text,{tips:[1,"#20a53a"],time:0,area:this.width}),this.$refs.text.focus()},hide_placeholder:function(){this.textPlaceholder=!0,layer.close(this.layerTips)}}}),Vue.component("bt-select",{template:'\n      <div class="inlineBlock" ref="divSelect">\n        <div :class="\'bt_select_updown mr10 \'+ (disabled?\'disabled\':\'\')" :style="{width:width}">\n            <span class="bt_select_value" style="padding-right: 20px;" @click="open_select_list">\n              <span class="bt_select_content">{{ content }}</span>\n              <span class="glyphicon glyphicon-triangle-bottom ml5"></span>\n            </span>\n            <ul ref="dropDown" class="bt_select_list" :class="{ show: showSelectList }" >\n              <slot></slot>\n            </ul>\n        </div>\n        <span v-if="describe" class="unit">{{ describe }}</span>\n      </div>\n    ',props:{width:{type:String,default:"200px"},value:{type:[String,Number,Boolean],default:""},disabled:{type:Boolean,default:!1},describe:{type:String,default:""}},data:function(){return{list:[],content:"",newValue:this.value,showSelectList:!1}},mounted:function(){this.content="",this.list=this.get_option_list(),document.addEventListener("click",this.hide_select_list_event)},beforeDestroy:function(){document.removeEventListener("click",this.hide_select_list_event)},methods:{open_select_list:function(){if(this.disabled)return!1;this.showSelectList=!this.showSelectList},show_select_list:function(){this.showSelectList=!0},hide_select_list:function(){this.showSelectList=!1},hide_select_list_event:function(t){var e=this.$refs,n=e.divSelect,e=e.dropDown;n&&(n.contains(t.target)||e.contains(t.target)||this.hide_select_list())},get_select_item:function(n){this.content=n.title,this.newValue=n.value,this.$children.forEach(function(t,e){t.newValue=n.value}),this.hide_select_list(),this.$emit("input",this.newValue),this.$emit("change",this.newValue)},get_option_list:function(){var n=this,a=[];return this.$children.forEach(function(t,e){t.value===n.value&&(n.content=t.title),a.push({title:t.title,value:t.value})}),""===this.value&&0<a.length&&this.get_select_item(a[0]),a}}}),Vue.component("bt-option",{template:"<li @click=\"select_down_item\" :class=\"{'item':true,'active':value === newValue,'disabled':disabled}\" :tips=\"tips\">{{ title }}</li>",props:{title:String,value:[String,Boolean,Number],tips:String,disabled:Boolean},data:function(){return{newValue:""}},methods:{select_down_item:function(){this.$parent.get_select_item({title:this.title,value:this.value})}},mounted:function(){this.newValue=this.$parent.newValue}}),Vue.component("bt-radio",{template:'<div class="inlineBlock"></div>'}),Vue.component("bt-switch",{template:'<div class="inlineBlock">\n            <div class="mlr15">\n                <span class="alignMiddle">{{ label }}</span>\n                <div class="inlineBlock alignMiddle">\n                    <input class="btswitch btswitch-ios hide" :id="random" type="checkbox" :checked="value" @change="input_event" :disabled="disabled">\n                    <label :class="{\'btswitch-btn\':true,\'disabled\':disabled}" :for="random"></label>\n                </div>\n            </div>\n        </div>',props:{label:String,disabled:{default:!1},value:{type:Boolean,default:!1}},data:function(){return{random:0}},mounted:function(){this.random=bt.get_random(10)},methods:{input_event:function(t){this.$emit("input",t.target.checked),this.$emit("change",t.target.checked)}}}),Vue.component("bt-checkbox",{template:'<div class="inlineBlock">\n            <div :class="{\'bt-checkbox\':true,disabled:disabled}"><label :class="{cursor:!disabled}" style="font-weight: 500;"><span :class="{mr5:label}"><i :class="{\'cust—checkbox\':true,\'cursor-pointer\':true,\'active\':parseInt(value)}" style="vertical-align: sub;"></i><input type="checkbox" :checked="parseInt(value)" :value="value" class="hide" @input="input_event" :disabled="disabled"/></span><span v-if="label">{{ label }}</span></label></div>\n        </div>',props:{label:{type:String,value:""},value:{type:[Boolean,Number],default:0},disabled:{type:Boolean,default:!1}},methods:{input_event:function(t){this.$emit("input",t.target.checked?1:0),this.$emit("change",t.target.checked)}}}),Vue.component("bt-button",{template:'<div class="inlineBlock"><button type="text" :class="\'btn btn-\'+ size +\' btn-\' + type +\' \'+ className" @click="$emit(\'click\', $event);" :disabled="disabled">{{ title }}</button></div>',props:{size:{type:String,default:"sm"},title:{type:String,default:"按钮"},type:{type:String,default:"default"},className:{type:String,default:""},disabled:{type:Boolean,default:!1}}}),Vue.component("bt-help",{template:'<ul class="help-info-text c7" style="padding:0 30px 0 30px">\n            <li v-for="(item,index) in list" :key="index" :style="{\'color\':(item[1] || \'#777\')}">{{ item[0] }}</li>\n        </ul>',props:{list:{type:Array,default:function(){return[]}}}}),Vue.component("bt-link",{template:'<div class="inlineBlock"><a :href="href" :class="{\'bt_success\':status,\'bt_danger\':!status,\'bt_warning\':status === 2}" @click="$emit(\'click\')" :target="target" :title="tips || title"><span>{{ title }}</span><span :class="\'glyphicon glyphicon-\' + icon " v-if="icon"></span></a></div>',props:{tips:String,icon:{type:[String,Boolean],default:!1},status:{type:[Boolean,Number],default:!0},href:{type:String,default:"javascript:void(0);"},target:{type:[String,Boolean],default:!1},title:String}}),Vue.component("bt-link-group",{template:'<span class="bt-link-group"><slot></slot></span>'}),Vue.component("bt-tabs",{template:'<div class="bt-tabs">\n            <div class="bt-w-menu site-menu pull-left" style="height: 100%;">\n                <p v-for="(item,index) in tabList" :class="{...{bgw:value === item.name},...className}" @click="cut_tabs(item,data)">{{item.label}}</p>\n            </div>\n            <div class="bt-w-con">\n               <slot></slot>\n            </div>\n        </div>',props:{value:{type:String,default:"default"},className:{type:Object,default:function(){return{}}},data:Object,tabRefresh:{type:Boolean,default:!1}},data:function(){return{model:this.value,tabList:[],publicView:!1}},watch:{value:{immediate:!0,handler:function(t){this.cut_tabs({name:t},this.data,!0)}}},mounted:function(){this.tabList=this.getTabList()},methods:{getTabList:function(){var n=this,a=[];return this.$children.forEach(function(t,e){a.push(Object.assign({},t.$attrs,{name:t.name})),t.public&&(n.publicView=!0)}),a},cut_tabs:function(n,t,e){var a=this;this.$children.forEach(function(t,e){t.name===n.name&&t.refresh&&(t.tabsRefresh=!1,a.$nextTick(function(){t.tabsRefresh=!0})),t.model=n.name}),void 0===e&&(this.$emit("input",n.name),this.$emit("change",n,t))}}}),Vue.component("bt-tabs-pane",{template:'<div class="bt-tabs-item pd15" style="overflow: auto;" v-if="model === name && tabsRefresh || public">\n\t\t\t<template v-if="public">\n\t\t\t\t<slot></slot>\n\t\t\t</template>\n            <template v-else-if="component && !keepAlive">\n                <component :is="component" :data="data"></component>\n            </template>\n            <template v-else-if="keepAlive && component">\n                <keep-alive>\n                    <component :is="component" :data="data"></component>\n                </keep-alive>\n            </template>\n            <template v-else-if="!isSlot">\n                <div id="webedit-con" style="height: 100%;"></div>\n            </template>\n            <template v-else>\n                <slot></slot>\n            </template>\n        </div>',props:{name:String,component:String,public:{type:Boolean,default:!1},keepAlive:{type:Boolean,default:!0},config:Object,refresh:{type:Boolean,default:!1}},data:function(){return{model:"",data:"",isSlot:"",tabsRefresh:!0,publicView:!1}},mounted:function(){void 0!==this.$slots.default&&(this.isSlot=!0),this.data=this.$parent.data,this.model=this.$parent.model,this.publicView=this.$parent.publicView}}),Vue.component("bt-table-page",{template:'<div class="page">\n\t\t\t<template v-if="value !== 1">\n\t            <a class="Pnum" @click="cut_page_event(1)">首页</a>\n            \t<a class="Pnum" @click="cut_page_event(value - 1)">上一页</a>\n\t\t\t</template>\n            <template v-for="(item,index) in pageNumber">\n                <span class="Pcurrent" v-if="item === value">{{item}}</span>\n                <a class="Pnum" @click="cut_page_event(item)" v-else>{{item}}</a>\n            </template>\n            <template v-if="pageNumber !== value && pageNumber != 0">\n                <a class="Pnum" @click="cut_page_event(value + 1)">下一页</a>\n            \t<a class="Pnum" @click="cut_page_event(pageNumber)" >尾页</a>\n\t\t\t</template>\n\n            <span class="Pcount">共{{ pageTotal }}条</span>\n\x3c!--            <select class="page_select_number" v-model="pageLimit">--\x3e\n\x3c!--                <option v-for="(item,index) in pageList" :key="index" :value="item">{{ item }}条/页</option>--\x3e\n\x3c!--            </select>--\x3e\n\x3c!--            <div class="page_jump_group">--\x3e\n\x3c!--                <span class="page_jump_title">跳转到</span>--\x3e\n\x3c!--                <input type="number" class="page_jump_input" v-model="value" @keyup.enter="cut_page_event">--\x3e\n\x3c!--                <span class="page_jump_title">页</span>--\x3e\n\x3c!--                <button type="button" class="page_jump_btn" @click="cut_page_event">确认</button>--\x3e\n\x3c!--            </div>--\x3e\n        </div>',props:{value:Number,pageTotal:{type:Number,default:0},pageLimit:Number},data:function(){return{pageList:[10,20,50,100,200]}},computed:{pageNumber:function(){return Math.ceil(this.pageTotal/this.pageLimit)}},methods:{cut_page_event:function(t){t=parseInt(t),this.$emit("cut-page",t),this.$emit("input",t)}},mounted:function(){}}),Vue.component("bt-table",{template:'\n      <div>\n        <div class="bt-table">\n          <div class="divtable mtb10">\n            <table class="table table-hover" :style="{minWidth:minWidth,maxWidth:maxWidth}">\n              <thead>\n                <tr>\n                  <th v-for="(item,index) in theadList" :style="{textAlign:item.align,width:item.width,minWidth:item.minWidth,maxWidth:item.maxWidth}">\n                    <bt-checkbox v-model="checkboxAll" v-if="item.type === \'checkbox\'" @change="set_checked"></bt-checkbox>\n                    <span v-else>{{item.title}}</span>\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <bt-column v-for="(item,index) in newData" :key="item[dataKey] || index" :row="item" :index="index"><slot></slot></bt-column>\n                <tr v-if="newData.length === 0"><td :colspan="theadList.length" style="text-align: center">列表数据为空</td></tr>\n              </tbody>\n            </table>\n            <div class="hide"><slot></slot></div>\n          </div>\n        </div>\n        <div class="tootls_group clearfix" v-if="batch || page">\n          <div class="pull-left" style="line-height: 28px;" v-if="batch">\n            <bt-checkbox v-model="checkboxAll" @change="set_checked" style="padding: 0 9px"></bt-checkbox>\n            <template v-if="batchList.length == 1">\n              <div class="bt_batch inlineBlock">\n                <button\n                  class="btn btn-default btn-sm"\n                  :class="{ \'bt-disabled\': checkboxList.length < 1, \'btn-success\': checkboxList.length >= 1 }"\n                  style="margin-left: 2px;"\n                  @click="onSingleBatchClick($event)">{{ batchList[0].title + checkTitle }}</button>\n              </div>\n            </template>\n            <template v-else-if="batchList.length > 1">\n              <bt-select v-model="batchVal" :disabled="checkboxList.length < 1" width="150px" class="bt-bach">\n                <bt-option v-for="(item,index) in batchList" :key="index" :title="item.title" :value="item.value"></bt-option>\n              </bt-select>\n              <bt-button :type="checkboxList.length < 1?\'default\':\'success\'" title="批量操作" :disabled="checkboxList.length < 1" @click="onBatchClick"></bt-button>\n            </template>\n          </div>\n          <div class="pull-right" v-if="typeof page == \'number\'">\n            <bt-table-page v-model="page" :page-total="pageTotal" :page-limit="pageLimit" @cut-page="cutPageNumber"></bt-table-page>\n          </div>\n        </div>\n      </div>\n    ',props:{dataKey:String,minWidth:String,maxWidth:String,fixedHead:{type:Boolean,default:!0},data:{type:[Object,Array],default:function(){return{}}},batch:{type:Boolean,default:!1},batchList:Array,page:Number,pageTotal:{type:Number,default:0},pageLimit:{type:Number,default:10}},data:function(){return{theadList:[],newData:[],theadListlength:0,checkboxAll:0,checkboxList:[],batchVal:""}},computed:{checkTitle:function(){return 0<this.checkboxList.length?"(已选中".concat(this.checkboxList.length,")"):""}},watch:{data:{immediate:!0,handler:function(t){var e=this;this.newData=[],this.$nextTick(function(){e.newData=e.data})}}},mounted:function(){this.newData=this.data,this.checkboxList=[],this.set_checked(),this.get_col_list()},methods:{set_checked:function(n){var a=this;this.newData.forEach(function(t,e){a.$set(t,"isChecked",n?1:0),a.checkboxList.push(e)}),n||(this.checkboxList=[]),this.data.length<=0&&(this.checkboxAll=0)},reset_checked:function(){this.checkboxList=[],this.checkboxAll=0},get_col_list:function(){var n=this;this.theadListlength=this.$children.length,this.$children.forEach(function(t,e){return void 0===t.isThead||(n.theadList.push({title:t.title,type:t.type||"default",align:t.align,width:t.width,name:t.name,maxWidth:t.maxWidth,minWidth:t.minWidth}),e!==n.theadListlength&&void 0)})},cutPageNumber:function(t){this.$emit("cut-pages",t)},onBatchClick:function(){var t=this.batchVal,e=this.checkboxList;this.$emit("onBatch",t,e)},onSingleBatchClick:function(t){var e=this.checkboxList;0<e.length?this.$emit("onSingleBatch",e):layer.tips("请选择需要批量操作的数据",$(t.target),{tips:[1,"red"],time:2e3})}}}),Vue.component("bt-column",{template:"<tr><slot></slot></tr>",props:{row:{type:Object,default:function(){return{}}},index:Number,label:String},watch:{row:{immediate:!0,handler:function(t){this.$children.row=this.row}}},mounted:function(){}}),Vue.component("bt-table-column",{template:'<td v-if="isThead">\n                <span :style="{width:fixedWidth && width?width:false,textAlign:align}" :class="{size_ellipsis:fixedWidth}" >\n                    <template v-if="type === \'checkbox\'">\n                        <bt-checkbox v-model="row.isChecked" @change="checkbox_change" ref="checkbox"></bt-checkbox>\n                    </template>\n                    <template v-else-if="prop">{{ row[prop] }}</template>\n                    <template v-else><slot :$row="row" :$index="index"></slot></template>\n                </span>\n            </td>',props:{scope:{type:[Object,Array,Boolean],default:!1},type:{type:String,default:"default"},title:[String,Number],width:String,maxWidth:String,minWidth:String,prop:String,align:String,fixedWidth:Boolean},data:function(){return{isThead:!1,row:{},label:null,index:-1}},methods:{checkbox_change:function(t){var e=this.$parent.$parent.checkboxList.indexOf(this.$parent.index);t?(this.$parent.$parent.checkboxList.push(this.$parent.index),this.$parent.$parent.newData.length===this.$parent.$parent.checkboxList.length&&(this.$parent.$parent.checkboxAll=1)):(this.$parent.$parent.checkboxAll=0,this.$parent.$parent.checkboxList.splice(e,1))}},mounted:function(){"object"===this.$isType(this.$parent.row)&&(this.isThead=!0,this.label=this.$parent.label,this.row=this.$parent.row,this.index=this.$parent.index)}}),Vue.component("bt-layer",{template:"<div :id=\"random\" :class=\"((className?(className + ' bt-layer-view'):'')  || {pd30:true,pb70:!btn,'bt-layer-view':true})\" v-if=\"this.status\" v-cloak>\n        <slot></slot>\n    </div>",props:{title:{type:String,default:"默认标题"},value:{type:[Number,Boolean],default:!1},area:{type:[String,Array],default:"400px"},btn:Array,className:{type:[String,Object],default:""}},data:function(){return{random:null,status:this.value,view:null}},watch:{value:function(t){t?this.create():this.close()}},mounted:function(){this.random=bt.get_random(10)},methods:{close:function(){layer.close(this.view)},create:function(){var n=this;this.status=!0,this.$nextTick(function(){layer.open({type:1,title:n.title||!1,area:n.area,btn:!1,closeBtn:n.closeBtn||2,content:$("#".concat(n.random)),success:function(t,e){n.$emit("success"),n.view=e},end:function(){n.$emit("close"),n.status=!1,n.$emit("input",n.status)}})})}}}),Vue.component("bt-site-logs",{template:'<pre class="command_output_pre" style="height:640px;" ref="command" >{{command}}</pre>',props:{data:Object},data:function(){return{command:""}},mounted:function(){this.get_project_logs()},methods:{get_project_logs:function(){var n=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.$http({get_project_log:"获取项目日志",verify:!1},{project_name:n.data.name});case 3:e=t.sent,n.command=e.msg,n.$nextTick(function(){n.$refs.command.scrollTop=n.$refs.command.scrollHeight}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n.$msg(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))()}}}),Vue.component("bt-site-network-mapping",{template:'<div class="ptb15">\n            <bt-switch label="外网映射" v-model="bind_extranet" @change="set_bind_extranet" :disabled="disabled"></bt-switch>\n            <bt-help :list="help_list"></bt-help>\n        </div>',props:{data:Object},data:function(){return{project_type:0,disabled:!1,help_list:[["如果您的是HTTP项目，且需要外网通过80/443访问，请开启外网映射"],["开启外网映射前，请到【域名管理】中至少添加1个域名"]],bind_extranet:!!this.data.project_config.bind_extranet}},methods:{set_bind_extranet:function(a){var i=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e={})[a?"bind_extranet":"unbind_extranet"]=a?"开启外网映射":"关闭外网映射",e.verify=!1,t.prev=3,t.next=6,i.$http(e,{project_name:i.data.name});case 6:if((n=t.sent).status)return t.next=10,i.$root.get_project_info(i.data.name);t.next=15;break;case 10:i.$parent.data=t.sent,i.$root.projectInfo=i.$parent.data,i.$parent.data.project_config.bind_extranet=a?1:0,t.next=17;break;case 15:i.bind_extranet=!a,i.$parent.data.project_config.bind_extranet=!a;case 17:i.$msg(n),t.next=22;break;case 20:t.prev=20,t.t0=t.catch(3);case 22:case"end":return t.stop()}},t,null,[[3,20]])}))()},set_disable:function(){if("java"===this.$request)if(this.project_type<3)return!0;return!1}},mounted:function(){switch(this.data.project_config.java_type){case"springboot":this.project_type=3;break;case"duli":this.project_type=2;break;case"neizhi":this.project_type=1}this.disabled=this.set_disable(),"java"===this.$request&&this.project_type<3&&this.help_list.push(["JAVA项目类型为内置项目和独立项目时无法关闭外网映射","red"])}}),Vue.component("bt-site-domain",{template:'<div class="block">\n            <div class="line relative">\n                <bt-text class="relative" type="textarea" width="380px" height="120px"\n                         v-model="domainInfo"\n                         line-height="20px"\n                         :placeholder="[\'如果需要绑定外网，请输入需要绑定的域名，该选项可为空\',\'如需填写多个域名，请换行填写，每行一个域名，默认为80端口\',\'泛解析添加方法 *.domain.com\',\'如另加端口格式为 www.domain.com:88\']"/>\n                <bt-button type="success" title="添加" @click="add_domain_info" style="position: absolute;right: 30px;top:35px"></bt-button>\n            </div>\n            <bt-table ref="domainTable" data-key="id" :data="domainList" :batch="true" :batchList="batchList" @onSingleBatch="onBatchDel">\n                <bt-table-column type="checkbox" width="20px"></bt-table-column>\n                <bt-table-column title="域名" v-slot="scope">\n                    <bt-link :title="scope.$row.name" :href="\'http://\'+ scope.$row.name + \':\' + scope.$row.port" target="_blank"></bt-link>\n                </bt-table-column>\n                <bt-table-column title="端口" width="100px" prop="port"></bt-table-column>\n                <bt-table-column title="操作" width="80px" align="right" v-slot="scope">\n                    <bt-link title="删除" @click="del_domain_info(scope.$row,scope.$index)" v-if="set_disable(scope.$row)"></bt-link>\n                    <span v-else>不可操作</span>\n                </bt-table-column>\n            </bt-table>\n        </div>',props:{data:Object},data:function(){return{disabled:!1,project_type:0,domainInfo:"",domainList:[],batchList:[{title:"批量删除"}]}},methods:{get_domain_list:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http({project_get_domain:"获取项目域名列表"},{project_name:e.data.name});case 3:e.domainList=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),e.$msg(t.t0);case 9:case"end":return t.stop()}},t,null,[[0,6]])}))()},add_domain_info:function(){var a=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""===a.domainInfo)return a.$error("域名不能为空"),t.abrupt("return",!1);t.next=3;break;case 3:if(e=bt.check_domain_list(a.domainInfo)){t.next=6;break}return t.abrupt("return",!1);case 6:return t.prev=6,t.next=9,a.$http({project_add_domain:"添加项目域名"},{project_name:a.data.name,domains:e});case 9:return n=t.sent,a.domainInfo="",t.next=13,a.get_domain_list();case 13:a.$msg(n),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(6),a.$msg(t.t0);case 19:case"end":return t.stop()}},t,null,[[6,16]])}))()},del_domain_info:function(n){var a=this;bt.confirm({title:"删除域名【"+n.name+"】",msg:"您真的要从站点中删除这个域名吗？"},_asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.$http({project_remove_domain:"删除项目域名"},{project_name:a.data.name,domain:n.name});case 3:return e=t.sent,t.next=6,a.get_domain_list();case 6:a.$msg(e),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a.$msg(t.t0);case 12:case"end":return t.stop()}},t,null,[[0,9]])})))},set_disable:function(t){if("java"===this.$request)if(this.project_type<3&&t.name===this.data.name)return!1;return!0},onBatchDel:function(){var l=this,p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];bt.show_confirm("批量删除域名",'<span style="color:red">同时删除选中的域名，是否继续？</span>',_asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n,a,i,r,o,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,e=[],n=l.domainList,p.forEach(function(t){return e.push(n[t])}),i="",r=l.data.name,o='正在执行批量删除域名，<span class="batch_progress">进度:0/'.concat(e.length,"</span>,请稍候..."),s=layer.msg(o,{icon:16,skin:"batch_tips",shade:.3,time:0,area:"400px"}),c=0;case 9:if(c<e.length)return a=e[c],$(".batch_tips.layui-layer .batch_progress").html("进度:".concat(c+1,"/").concat(e.length)),t.next=14,l.$http({project_remove_domain:!1,verify:!1},{project_name:r,domain:a.name});t.next=19;break;case 14:o=t.sent,i+='\n                <tr>\n                  <td><span class="size_ellipsis" style="width: 120px;" title="'.concat(a.name,'">').concat(a.name,'</span></td>\n                  <td class="text-right"><span style="color: ').concat(o.status?"#20a53a":"red",'">').concat(o.msg,"</span></td>\n                </tr>\n              ");case 16:c++,t.next=9;break;case 19:return layer.close(s),t.next=22,l.get_domain_list();case 22:l.$refs.domainTable.reset_checked(),l.batch_success_table({html:i,th:"项目名称",title:"批量删除项目"}),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(0),l.$msg(t.t0);case 29:case"end":return t.stop()}},t,null,[[0,26]])})))},batch_success_table:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{th:"",title:"",html:""},e=t.th,n=t.title,t=t.html;bt.open({type:1,title:n,area:"350px",shadeClose:!1,closeBtn:2,content:'\n            <div class="batch_title">\n              <span>\n                <span class="batch_icon"></span>\n                <span class="batch_text">'.concat(n,'操作完成！</span>\n              </span>\n            </div>\n            <div class="batch_tabel divtable" style="margin: 15px 30px 15px 30px; overflow: auto; max-height: 226px; border: 1px solid #ddd;">\n              <table class="table table-hover" id="batch_tabel" style="border: none;">\n                <thead>\n                  <tr>\n                    <th>').concat(e,'</th>\n                    <th class="text-right">操作结果</th>\n                  </tr>\n                </thead>\n                <tbody>').concat(t,"</tbody>\n              </table>\n            </div>"),success:function(){bt.fixed_table("batch_tabel")}})}},mounted:function(){if("java"===this.$request)switch(this.data.project_config.java_type){case"springboot":this.project_type=3;break;case"duli":this.project_type=2;break;case"neizhi":this.project_type=1}this.get_domain_list()}}),Vue.component("bt-site-service-status",{template:'<div class="soft-man-con pd10">\n            <p class="status">当前状态：<bt-link :title="data.run ? \'运行中\' : \'未启动\'"\n                                        :status="data.run"\n                                        :icon="data.run?\'play\':\'pause\'"></bt-link></p>\n            <div class="sfm-opt">\n                <bt-button :title="data.run?\'停止\':\'启动\'" @click="set_service_status((data.run ?\'stop_project\':\'start_project\'),data.name)"></bt-button>\n                <bt-button title="重启" @click="set_service_status(\'restart_project\',data.name)"></bt-button>\n                </div>\n        </div>',props:{data:{type:[Object,Array],default:function(){return{run:!1,name:""}}}},data:function(){return{run:this.data.run}},methods:{set_service_status:function(a,i){var r=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e={})[a]=(n={stop_project:["停止["+i+"]项目，停用后将无法访问该项目，您真的要停用这个项目吗","停止项目"],start_project:["即将启动["+i+"]项目，是否继续操作？","启动项目"],restart_project:["您确定要重启项目吗，当前项目可能会受到影响，继续操作?","重启项目"]})[a][1]+"["+i+"]",t.next=4,r.$confirm({title:n[a][1]+"["+i+"]",msg:n[a][0]});case 4:return t.prev=4,t.next=7,r.$http(e,{project_name:i});case 7:n=t.sent,r.run="restart_project"===a||!r.run,r.$parent.data.run=r.run,r.$msg(n),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),r.$msg(t.t0);case 16:case"end":return t.stop()}},t,null,[[4,13]])}))()}},mounted:function(){}}),Vue.component("bt-java-form",{template:'<div :class="{\'bt-form\':true,\'ptb15\':!isAddForm}">\n                <bt-line label="项目类型">\n                    <div class="btn-group " role="group">\n                        <button v-for="(item,index) in projectTypeList" :key="index" type="button"\n                                :class="{\'btn\':true,\'btn-default\':true,\'btn-sm\':true,\'btn-success\':item.value === form.project_type}"\n                                @click="cut_java_project_type(item,index)" :disabled="!isAddForm">\n                            <span>{{ item.title }}</span>\n                            <input type="checkbox" class="hide" v-model="form.project_type" :value="item.value"/>\n                        </button>\n                    </div>\n                    <bt-link class="mlr15" title="JAVA项目教程" href="https://www.bt.cn/bbs/thread-76217-1-1.html" target="_blank"></bt-link>\n                </bt-line>\n                <bt-line label="项目域名" v-if="form.project_type < 3">\n                    <bt-text width="380px" v-model="form.domain" placeholder="请输入项目域名" :disabled="!isAddForm" @input="input_project_domain"/>\n                </bt-line>\n                <bt-line label="项目路径" v-if="form.project_type < 3">\n                    <bt-text v-model="form.project_path" width="350px" class-name="mr10"\n                             placeholder="请输入或选择项目路径" icon="folder-open"\n                             @icon-event="select_path(\'project_path\')" />\n                </bt-line>\n                <bt-line label="Tomcat版本" v-if="form.project_type < 3 && $root.updateView" >\n                    <bt-select v-model="form.tomcat_version" :disabled="!isAddForm">\n                      <template v-for="(item,index) in tomcatList">\n                        <bt-option v-if="!isAddForm || item.status" :key="index" :title="item.title" :value="item.value"></bt-option>\n                      </template>\n                    </bt-select>\n                    <bt-link title="安装Tomcat其他版本" v-if="isAddForm" @click="$root.tomcat_manage_view"></bt-link>\n                </bt-line>\n                <bt-line label="项目jar路径" v-if="form.project_type > 2">\n                    <bt-text width="350px" v-model="form.project_jar"\n                             class-name="mr10"\n                             :disabled="!isAddForm"\n                             placeholder="请输入或选择项目jar路径" :icon="isAddForm?\'folder-open\':false"\n                             @blur="blur_project_jar"\n                             @icon-event="select_path(\'project_jdr_path\',\'file\')"/>\n                </bt-line>\n                <bt-line label="项目名称" v-if="form.project_type > 2">\n                    <bt-text width="380px" v-model="form.project_name"\n                             placeholder="选择项目文件，自动获取名称" :disabled="!isAddForm" @input="input_project_name"/>\n                </bt-line>\n                <bt-line label="项目端口" v-if="form.project_type > 1">\n                    <bt-text width="180px" type="number" v-model="form.port"\n                             :placeholder="form.project_type < 3?\'请输入项目端口\':\'选择项目文件，自动获取端口\'" @input="input_project_port" describe="* 请输入项目的真实端口，启动可重新设置"/>\n                    <span></span>\n                </bt-line>\n                <div class="line " style="margin-left:100px;" v-if="!data.listen_ok"><span class="bt_danger">项目端口可能有误，检测到当前项目监听了以下端口[ {{ data.listen.join(\'、\') }} ]</span></div>\n                <bt-line label="项目JDK" v-if="form.project_type > 2">\n                    <bt-select width="300px" v-model="form.project_jdk" @change="cut_project_jdk" v-if="$root.updateView">\n                        <bt-option v-for="(item,index) in jdkList" :key="index" :title="item.title" :value="item.value"></bt-option>\n                    </bt-select>\n                    <bt-link title="添加JDK信息" v-if="isAddForm" @click="$root.jdk_manage_view"></bt-link>\n                </bt-line>\n                <bt-line label="项目执行命令" v-if="form.project_type > 2">\n                    <bt-text type="textarea" width="380px" line-height="20px" height="70px"\n                             :resize="true" :tips="true" v-model="form.project_cmd"\n                             placeholder="选择项目jar文件，自动获取项目执行命令"/>\n                </bt-line>\n                <bt-line label="远程调试开启" v-if="form.project_type > 2">\n                    <bt-checkbox v-model="form.debug" label="设置远程调试，配合IEDA使用，生产环境慎用" @change="set_project_debug" :disabled="form.project_cmd === \'\'" />\n                </bt-line>\n                <bt-line label="项目用户" v-if="form.project_type > 2">\n                    <bt-select width="150px" v-model="form.run_user" describe="* 无特殊需求请选择springboot用户">\n                        <bt-option v-for="(item,index) in projectUserList" :key="index" :title="item.title" :value="item.value"></bt-option>\n                    </bt-select>\n                </bt-line>\n                <bt-line label="开机启动" v-if="form.project_type > 1">\n                    <bt-checkbox v-model="form.auth" label="是否设置开机自动启动"/>\n                </bt-line>\n                <bt-line label="前后端分离" v-if="form.project_type == 3">\n                    <bt-checkbox v-model="form.is_separation" label="是否设置前后端分离" :disabled="isSeparationDisabled || !isAddForm" @change="onSeparationChange" />\n                </bt-line>\n                <bt-line label="后端目录" v-if="form.is_separation == 1">\n                    <bt-text width="380px" v-model="form.api_url" :disabled="!isAddForm" placeholder="请输入后端目录,例如：/api"/>\n                </bt-line>\n                <bt-line label="目标url" v-if="form.is_separation == 1">\n                    <bt-text width="380px" v-model="form.host_url" :disabled="!isAddForm" placeholder="请输入目标url"/>\n                </bt-line>\n                <bt-line label="静态目录" v-if="form.is_separation == 1">\n                    <bt-text width="350px" class-name="mr10" v-model="form.static_path"\n                      :disabled="!isAddForm" :icon="isAddForm?\'folder-open\':false"\n                      placeholder="请输入或选择静态目录"\n                      @icon-event="select_path(\'static_path\')" />\n                </bt-line>\n                <bt-line label="项目备注">\n                    <bt-text width="380px" v-model="form.project_ps"\n                             placeholder="请输入项目备注,非必填"/>\n                </bt-line>\n                <bt-line label="绑定域名" v-if="isAddForm && form.project_type === 3">\n                    <bt-text type="textarea" width="380px" height="120px"\n                             v-model="form.domains"\n                             :placeholder="[\'如果需要绑定外网，请输入需要绑定的域名，该选项可为空\',\'如需填写多个域名，请换行填写，每行一个域名，默认为80端口\',\'泛解析添加方法 *.domain.com\',\'如另加端口格式为 www.domain.com:88\']"/>\n                </bt-line>\n                <bt-line label="" v-if="!isAddForm">\n                    <bt-button type="success" title="保存项目配置" @click="editing_project_info"></bt-button>\n                </bt-line>\n            </div>',props:{data:{type:Object,default:function(){return{listen_ok:!0,listen:[]}}},config:{type:Object,default:function(){return{jdkList:[],tomcatList:[],form:{}}}}},computed:{isSeparationDisabled:function(){var t=this.form,e=t.project_name,n=t.port,t=t.project_jdk;return""==e||""==n||""==t}},data:function(){return{projectTypeList:[{title:"Spring_boot",value:3},{title:"内置项目",value:1},{title:"独立项目",value:2}],projectUserList:[{title:"springboot",value:"springboot"},{title:"root",value:"root"}],form:this.config.form,jdkList:this.config.jdkList,tomcatList:this.config.tomcatList,isAddForm:!0,help_list:[]}},methods:{cut_java_project_type:function(t){this.form.is_separation=0,this.form.project_type=t.value},input_project_domain:function(){this.isAddForm&&(this.form.project_ps=this.form.domain,this.form.project_path=this.form.directory+this.form.domain)},input_project_name:function(){this.isAddForm&&(this.form.project_ps=this.form.project_name),1==this.form.is_separation&&(this.form.static_path="/www/wwwroot/"+this.form.project_name)},input_project_port:function(){this.form.host_url="http://127.0.0.0:"+this.form.port},set_project_debug:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form.debug)return t.prev=1,t.next=4,e.$confirm({title:"警告",msg:"此功能为远程调试配合IEDA使用，不建议在生产环境使用，调试端口随机生成，端口号请查看生成的命令,默认不开放此端口,需自行开放。"});t.next=13;break;case 4:return t.next=6,e.get_java_project_cmd(e.form);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.form.debug=!1;case 11:t.next=15;break;case 13:return t.next=15,e.get_java_project_cmd(e.form);case 15:case"end":return t.stop()}},t,null,[[1,8]])}))()},select_path:function(a,t){var i=this;this.$tryCatch(function(){bt.select_path("select_path",t||"dir",function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="project_path"===t.t0?3:"project_jdr_path"===t.t0?6:14;break;case 3:return i.form.directory=e+"/",i.form.project_path=e,t.abrupt("break",14);case 6:return n=e.split("/"),n=(n=n[n.length-1]).split(".")[0],i.form.project_name=n,i.form.project_ps=n,i.form.project_jar=e,t.next=13,i.get_java_project_cmd(i.form);case 13:return t.abrupt("break",14);case 14:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}())})},blur_project_jar:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("/www/wwwroot"!==e.form.project_jar&&e.isAddForm){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,e.get_java_project_cmd(e.form);case 4:case"end":return t.stop()}},t)}))()},cut_project_jdk:function(){var e=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("/www/wwwroot"===e.form.project_jar)return t.abrupt("return",!1);t.next=2;break;case 2:if(e.isAddForm){t.next=7;break}return t.next=5,e.reset_java_project_cmd(e.form);case 5:t.next=9;break;case 7:return t.next=9,e.get_java_project_cmd(e.form);case 9:case"end":return t.stop()}},t)}))()},get_java_project_cmd:function(n){var a=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.$http({return_cmd:"获取项目执行命令"},{project_jar:n.project_jar,project_jdk:n.project_jdk,debug:n.debug});case 3:e=t.sent,a.form.project_cmd=e.msg,a.form.port=e.msg.match(/([0-9]*)$/)[0],t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a.$msg(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))()},reset_java_project_cmd:function(n){var a=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.$http({return_jdkcmd:"重置项目命令"},{jdK_path:n.project_jdk,cmd:n.project_cmd});case 3:e=t.sent,a.form.project_cmd=e.msg,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a.$msg(t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}))()},editing_project_info:function(){var n=this;return _asyncToGenerator(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.$http({modify_project:"修改项目配置"},Object.assign({project_name:n.data.name},n.form));case 3:return e=t.sent,t.next=6,n.$root.get_project_info(n.data.name);case 6:n.$parent.data=t.sent,n.$msg(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n.$msg(t.t0);case 13:case"end":return t.stop()}},t,null,[[0,10]])}))()},onSeparationChange:function(){var t=this.form,e=t.is_separation,n=t.port,t=t.project_name;1==e?(this.form.host_url="http://127.0.0.0:"+n,this.form.static_path="/www/wwwroot/"+t):(this.form.host_url="",this.form.static_path="")}},mounted:function(){var t,e,n;this.form.directory="/www/wwwroot/",this.$parent.config&&this.$parent.data&&(e=(t=this.$parent.data).project_config,this.isAddForm=!1,n=this.$parent.config,this.jdkList=n.jdkList,this.tomcatList=n.tomcatList,this.form=Object.assign(n.form,{project_type:"springboot"===e.java_type?3:"duli"===e.java_type?2:1,project_name:t.name,domain:t.name,domains:"",project_path:"springboot"!==e.java_type?t.path:"",project_jdk:e.project_jdk||"",project_jar:e.project_jar||"",project_cmd:e.project_cmd||"",run_user:e.run_user,tomcat_version:parseInt(e.tomcat_version||"0"),project_ps:t.ps,port:e.port,auth:parseInt(e.auth),is_separation:parseInt(e.is_separation),api_url:e.api_url,host_url:e.host_url,static_path:e.static_path,debug:t.debug?1:0}))}})});
//# sourceMappingURL=maps/vue-components.min.js.map
